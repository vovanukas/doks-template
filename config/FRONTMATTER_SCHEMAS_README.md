# Doks Frontmatter RJSF Schemas

This directory contains React JSON Schema Form (RJSF) schemas for managing frontmatter in Doks markdown pages. These schemas were generated by analyzing the actual Doks theme to identify all frontmatter fields used in layouts and templates.

## Overview

The schemas provide type-safe, user-friendly forms for editing markdown frontmatter with:
- Field validation
- Helpful descriptions
- Appropriate input widgets
- Auto-completion hints
- Organized field ordering

## Schema Files

### General Purpose Schemas

**`frontmatter-jsonSchema.json`** + **`frontmatter-uiSchema.json`**
- Complete schema with all possible frontmatter fields
- Use for any content type
- Includes advanced fields like `cascade`, `resources`, `outputs`

### Content-Type Specific Schemas

**`frontmatter-blog-jsonSchema.json`** + **`frontmatter-blog-uiSchema.json`**
- Optimized for blog posts
- Focuses on: categories, tags, contributors, pinned status
- Required fields: `title`, `date`

**`frontmatter-docs-jsonSchema.json`** + **`frontmatter-docs-uiSchema.json`**
- Optimized for documentation pages
- Focuses on: navigation weight, TOC, aliases
- Clean interface for technical documentation

## Frontmatter Fields Reference

### Core Fields (All Content Types)

| Field | Type | Description | Default |
|-------|------|-------------|---------|
| `title` | string | Page title (required) | - |
| `description` | string | Brief description for SEO | "" |
| `summary` | string | Short summary for cards/lists | "" |
| `date` | datetime | Publication date | auto |
| `lastmod` | datetime | Last modified date | auto |
| `draft` | boolean | Draft status | `false` |
| `weight` | integer | Sort order (lower = first) | `999` |

### SEO Fields

| Field | Type | Description |
|-------|------|-------------|
| `seo.title` | string | Custom SEO title override |
| `seo.description` | string | Meta description (160 char max) |
| `seo.canonical` | string | Canonical URL |
| `seo.noindex` | boolean | Prevent search indexing |
| `images` | array | Social share images |
| `exclude_search` | boolean | Exclude from site search |
| `sitemap_exclude` | boolean | Exclude from sitemap.xml |

### Blog-Specific Fields

| Field | Type | Description | Default |
|-------|------|-------------|---------|
| `categories` | array | Post categories | `[]` |
| `tags` | array | Post tags | `[]` |
| `contributors` | array | Author names | `[]` |
| `pinned` | boolean | Pin to top of listings | `false` |
| `homepage` | boolean | Feature on homepage | `false` |

### Documentation Fields

| Field | Type | Description | Default |
|-------|------|-------------|---------|
| `toc` | boolean | Show table of contents | `true` |
| `lead` | string | Lead paragraph (HTML) | "" |
| `aliases` | array | URL redirects | `[]` |

### Taxonomy/List Page Fields

| Field | Type | Description |
|-------|------|-------------|
| `headline` | string | Alternative display title |
| `avatar` | string | Avatar image filename |

### Advanced Fields

| Field | Type | Description |
|-------|------|-------------|
| `type` | string | Content type (affects layout) |
| `layout` | string | Custom layout template |
| `outputs` | array | Output formats (html, json, rss) |
| `cascade` | object | Cascade settings to children |
| `resources` | array | Page bundle resource config |

## Field Details & Usage

### Required Fields

**All Pages:**
- `title`: Must be provided

**Blog Posts:**
- `title`: Post title
- `date`: Publication date (auto-generated if not set)

**Documentation:**
- `title`: Page title

### Common Patterns

#### Basic Blog Post
```yaml
---
title: "My Blog Post"
description: "A great post about Hugo"
summary: "Learn about Hugo static site generator"
date: 2024-01-15T10:00:00-05:00
lastmod: 2024-01-15T10:00:00-05:00
draft: false
weight: 50
categories: ["Hugo", "Web Development"]
tags: ["tutorial", "getting-started"]
contributors: ["John Doe"]
pinned: false
homepage: false
seo:
  title: ""
  description: ""
  canonical: ""
  noindex: false
---
```

#### Basic Documentation Page
```yaml
---
title: "Getting Started"
description: "Get started with our product"
summary: ""
date: 2024-01-15T10:00:00-05:00
lastmod: 2024-01-15T10:00:00-05:00
draft: false
weight: 100
toc: true
seo:
  title: ""
  description: ""
  canonical: ""
  noindex: false
---
```

#### Section Index (_index.md)
```yaml
---
title: "Blog"
description: "Our company blog"
summary: ""
date: 2024-01-15T10:00:00-05:00
lastmod: 2024-01-15T10:00:00-05:00
draft: false
weight: 50
---
```

## How These Were Generated

These schemas were created by:

1. **Analyzing Content Files**: Examined actual content files in the Doks project
2. **Parsing Archetypes**: Reviewed theme archetypes (blog.md, docs.md, default.md)
3. **Scanning Layouts**: Searched all layout files for `.Params.*` references
4. **Theme Deep Dive**: Explored the `@thulite/doks-core` theme structure
5. **Testing**: Validated against real-world Doks usage patterns

## Frontmatter Fields Found in Doks Theme

The following fields were discovered through theme analysis:

**From Archetypes:**
- title, description, summary, date, lastmod, draft, weight, toc
- categories, tags, contributors, pinned, homepage
- seo.title, seo.description, seo.canonical, seo.noindex

**From Layout Files:**
- lead, avatar, headline
- exclude_search, sitemap_exclude
- Standard Hugo fields: type, layout, aliases, outputs, cascade, resources

**From Theme Layouts:**
- Used in blog/single.html: title, summary, tags, categories, contributors
- Used in single.html: toc, lead
- Used in term.html: avatar, headline, summary
- Used in home.searchindex.json: exclude_search, tags
- Used in section.sitemap.xml: sitemap_exclude

## Integration with RJSF

To use these schemas with React JSON Schema Form:

```javascript
import { Form } from '@rjsf/core';
import validator from '@rjsf/validator-ajv8';
import jsonSchema from './frontmatter-blog-jsonSchema.json';
import uiSchema from './frontmatter-blog-uiSchema.json';

function FrontmatterEditor({ formData, onChange }) {
  return (
    <Form
      schema={jsonSchema}
      uiSchema={uiSchema}
      formData={formData}
      validator={validator}
      onChange={onChange}
      onSubmit={({ formData }) => console.log('Submit:', formData)}
    />
  );
}
```

## Choosing the Right Schema

| Use Case | Schema Files |
|----------|-------------|
| Blog posts | `frontmatter-blog-*.json` |
| Documentation | `frontmatter-docs-*.json` |
| General/mixed content | `frontmatter-*.json` |
| Custom CMS | Start with general, customize as needed |

## Validation Rules

### Title
- Required for all pages
- Minimum 1 character

### SEO Description
- Maximum 160 characters recommended
- Used in search results and social previews

### Weight
- Integer between 1-9999
- Lower numbers appear first in navigation
- Default: 999 (docs), 50 (blog)

### Date Fields
- ISO 8601 format: `YYYY-MM-DDTHH:MM:SS+TZ`
- Example: `2024-01-15T10:00:00-05:00`

### Images
- Must end with: .jpg, .jpeg, .png, .webp, or .gif
- Can be relative path or full URL

### Aliases
- Must start with `/`
- Should be full path: `/old-path/page/`

### Avatar
- Filename only (no path)
- Must be a page resource in bundle
- Valid extensions: .jpg, .jpeg, .png, .webp, .gif

## Theme-Specific Behavior

### Table of Contents (toc)
- Only shown on pages with `toc: true`
- Only relevant for pages in sections defined in `site.Params.doks.sectionNav`
- Default sections: `["docs"]`

### Contributors
- Names should match taxonomy terms in `/content/contributors/`
- Theme looks for avatar in contributor term's page resources
- Displayed with reading time and categories in blog meta

### Pinned Posts
- Pinned posts appear at top of blog listings
- Controlled by `pinned: true`

### Homepage Feature
- Set `homepage: true` to feature content on homepage
- Works with homepage queries for featured content

### Search Exclusion
- `exclude_search: true` removes from FlexSearch index
- Respects `site.Params.doks.searchExclKinds` and `searchExclTypes`

### Edit Page Links
- Only shown if `site.Params.doks.editPage` is enabled
- Requires `site.Params.doks.docsRepo` configuration

## License & Credits

These schemas were created by analyzing the [Doks](https://getdoks.org/) Hugo theme by Thulite.

- Doks Theme: https://github.com/thuliteio/doks
- Hugo: https://gohugo.io/
- RJSF: https://rjsf-team.github.io/react-jsonschema-form/

## Contributing

To update these schemas:

1. Check for new theme versions and frontmatter fields
2. Search layouts for new `.Params.*` references
3. Update JSON schemas with new fields
4. Update UI schemas with appropriate widgets
5. Document changes in this README

## Support

For questions about:
- **Doks theme**: https://github.com/thuliteio/doks/discussions
- **Hugo frontmatter**: https://gohugo.io/content-management/front-matter/
- **RJSF**: https://rjsf-team.github.io/react-jsonschema-form/docs/

---

Generated: November 2024
Theme Version: Doks (Thulite) latest



